# Declare a dialect in the include directory
function(pmlc_add_mlir_dialect namespace)
  set(LLVM_TARGET_DEFINITIONS ops.td)
  mlir_tablegen(ops.h.inc -gen-op-decls)
  mlir_tablegen(ops.cc.inc -gen-op-defs)
  mlir_tablegen(dialect.h.inc -gen-dialect-decls -dialect=${namespace})
  add_public_tablegen_target(PMLC${namespace}DialectGen)
  add_dependencies(mlir-headers PMLC${namespace}DialectGen)
endfunction()

function(pmlc_add_mlir_interfaces namespace)
  set(LLVM_TARGET_DEFINITIONS interfaces.td)
  mlir_tablegen(interfaces.h.inc -gen-op-interface-decls)
  mlir_tablegen(interfaces.cc.inc -gen-op-interface-defs)
  add_public_tablegen_target(PMLC${namespace}InterfacesGen)
  add_dependencies(mlir-headers PMLC${namespace}InterfacesGen)
endfunction()

add_subdirectory(util)
add_subdirectory(dialect)